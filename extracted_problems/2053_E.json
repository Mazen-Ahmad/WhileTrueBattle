{
  "contestId": 2053,
  "index": "E",
  "name": "Resourceful Caterpillar Sequence",
  "rating": 1900,
  "tags": [
    "implementation"
  ],
  "statement": "Endless Repeating 7 Days — r-906, Panopticon There is a tree consisting of $$$n$$$ vertices. Let a caterpillar be denoted by an integer pair $$$(p, q)$$$ ($$$1 \\leq p, q \\leq n$$$, $$$p \\neq q$$$): its head is at vertex $$$p$$$, its tail is at vertex $$$q$$$, and it dominates all the vertices on the simple path from $$$p$$$ to $$$q$$$ (including $$$p$$$ and $$$q$$$). The caterpillar sequence of $$$(p, q)$$$ is defined as the sequence consisting only of the vertices on the simple path, sorted in the ascending order of the distance to $$$p$$$. Nora and Aron are taking turns moving the caterpillar , with Nora going first. Both players will be using his or her own optimal strategy: They will play to make himself or herself win ; However, if it is impossible, they will play to prevent the other person from winning (thus, the game will end in a tie ). In Nora's turn, she must choose a vertex $$$u$$$ adjacent to vertex $$$p$$$, which is not dominated by the caterpillar , and move all the vertices in it by one edge towards vertex $$$u$$$$$$^{\\text{∗}}$$$. In Aron's turn, he must choose a vertex $$$v$$$ adjacent to vertex $$$q$$$, which is not dominated by the caterpillar , and move all the vertices in it by one edge towards vertex $$$v$$$. Note that the moves allowed to the two players are different. Whenever $$$p$$$ is a leaf$$$^{\\text{†}}$$$, Nora wins $$$^{\\text{‡}}$$$. Whenever $$$q$$$ is a leaf, Aron wins . If either initially both $$$p$$$ and $$$q$$$ are leaves, or after $$$10^{100}$$$ turns the game has not ended, the result is a tie . Please count the number of integer pairs $$$(p, q)$$$ with $$$1 \\leq p, q \\leq n$$$ and $$$p \\neq q$$$ such that, if the caterpillar is initially $$$(p, q)$$$, Aron wins the game. $$$^{\\text{∗}}$$$In other words: Let the current caterpillar sequence be $$$c_1, c_2, \\ldots, c_k$$$, then after the move, the new caterpillar sequence becomes $$$d(u, c_1), d(u, c_2), \\ldots, d(u, c_k)$$$. Here, $$$d(x, y)$$$ is the next vertex on the simple path from $$$y$$$ to $$$x$$$. $$$^{\\text{†}}$$$In a tree, a vertex is called a leaf if and only if its degree is $$$1$$$. $$$^{\\text{‡}}$$$Therefore, Nora never fails to choose a vertex $$$u$$$ when the game has not ended. The same goes for Aron.",
  "inputFormat": "Each test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\leq t \\leq 2\\cdot 10^4$$$) — the number of test cases. The description of the test cases follows. The first line of each test case contains a single integer $$$n$$$ ($$$2 \\leq n \\leq 2\\cdot 10^5$$$) — the number of vertices in the tree. The following $$$n - 1$$$ lines each contain two integers $$$u$$$ and $$$v$$$ ($$$1 \\leq u, v \\leq n$$$), denoting an edge between vertices $$$u$$$ and $$$v$$$. It is guaranteed that the given edges form a tree. It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$4\\cdot 10^5$$$.",
  "outputFormat": "For each test case, output a single line containing an integer: the number of integer pairs $$$(p, q)$$$ which make Aron win .",
  "sampleTests": [
    {
      "input": "5\n2\n1 2\n5\n1 2\n1 3\n2 4\n2 5\n12\n1 6\n11 2\n4 8\n12 3\n2 7\n6 12\n8 1\n2 3\n5 12\n9 2\n10 3\n10\n1 2\n2 3\n3 4\n4 5\n5 6\n4 7\n6 8\n4 9\n4 10\n25\n1 16\n11 22\n6 14\n3 1\n20 14\n23 17\n25 19\n10 11\n3 18\n10 6\n2 21\n4 5\n11 12\n4 9\n9 13\n8 6\n6 1\n3 7\n8 19\n10 24\n15 13\n1 2\n3 4\n17 8",
      "output": "0\n6\n40\n27\n171"
    }
  ],
  "timeLimit": 2000,
  "memoryLimit": 512,
  "sourceUrl": "https://codeforces.com/problemset/problem/2053/E",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}