{
  "contestId": 2129,
  "index": "C2",
  "name": "Interactive RBS (Medium Version)",
  "rating": 2000,
  "tags": [
    "implementation"
  ],
  "statement": "This is an interactive problem. This is the medium version of the problem. The only difference is the limit on the number of queries. You can make hacks only if all versions of the problem are solved. There is a hidden bracket sequence $$$s$$$ of length $$$n$$$, where $$$s$$$ only contains $$$\\texttt{'('}$$$ and $$$\\texttt{')'}$$$. It is guaranteed that $$$s$$$ contains at least one $$$\\texttt{'('}$$$ and one $$$\\texttt{')'}$$$. To find this bracket sequence, you can ask queries. Each query has the following form: you pick an integer $$$k$$$ and arbitrary indices $$$i_1, i_2, \\ldots, i_k$$$ ($$$1 \\le k \\le 1000$$$, $$$1 \\le i_1, i_2, \\ldots, i_k \\le n$$$). Note that the indices can be equal. Next, you receive an integer $$$f(s_{i_1}s_{i_2}\\ldots s_{i_k})$$$ calculated by the jury. For a bracket sequence $$$t$$$, $$$f(t)$$$ is the number of non-empty regular bracket substrings in $$$t$$$ (the substrings must be contiguous ). For example, $$$f(\\texttt{\"()())\"}) = 3$$$. A bracket sequence is called regular if it can be constructed in the following way. The empty sequence $$$\\varnothing$$$ is regular. If the bracket sequence $$$A$$$ is regular, then $$$\\mathtt{(}A\\mathtt{)}$$$ is also regular. If the bracket sequences $$$A$$$ and $$$B$$$ are regular, then the concatenated sequence $$$A B$$$ is also regular. For example, the sequences $$$\\texttt{\"(())()\"}$$$, $$$\\texttt{\"()\"}$$$ are regular, while $$$\\texttt{\"(()\"}$$$ and $$$\\texttt{\"())(\"}$$$ are not. Find the sequence $$$s$$$ using no more than $$$200$$$ queries.",
  "inputFormat": "Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\le t \\le 20$$$). The description of the test cases follows.",
  "outputFormat": "Output specification not found",
  "sampleTests": [
    {
      "input": "2\n3\n\n0\n\n1\n\n1\n\n2\n\n3",
      "output": "? 4 1 2 3 3\n\n? 2 2 1\n\n? 2 3 1\n\n! )((\n\n? 4 1 2 1 2\n\n! ()"
    }
  ],
  "timeLimit": 2000,
  "memoryLimit": 256,
  "sourceUrl": "https://codeforces.com/problemset/problem/2129/C2",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}