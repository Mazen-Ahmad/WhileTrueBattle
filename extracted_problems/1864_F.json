{
  "contestId": 1864,
  "index": "F",
  "name": "Exotic Queries",
  "rating": 2300,
  "tags": [
    "implementation"
  ],
  "statement": "AquaMoon gives RiverHamster a sequence of integers $$$a_1,a_2,\\dots,a_n$$$, and RiverHamster gives you $$$q$$$ queries. Each query is expressed by two integers $$$l$$$ and $$$r$$$. For each query independently, you can take any continuous segment of the sequence and subtract an identical non-negative value from all the numbers of this segment. You can do so multiple (possibly, zero) times. However, you may not choose two intersecting segments which are not included in one another. Your goal is to convert to $$$0$$$ all numbers whose initial value was within the range $$$[l, r]$$$. You must do so in the minimum number of operations. Please note that the queries are independent, the numbers in the array are restored to their initial values between the queries. Formally, for each query, you are to find the smallest $$$m$$$ such that there exists a sequence $$$\\{(x_j,y_j,z_j)\\}_{j=1}^{m}$$$ satisfying the following conditions: for any $$$1 \\le j \\leq m$$$, $$$z_j \\ge 0$$$ and $$$1 \\le x_j \\le y_j \\leq n$$$ (here $$$[x_j, y_j]$$$ correspond to the segment of the sequence); for any $$$1 \\le j < k \\le m$$$, it is true that $$$[x_j,y_j]\\subseteq[x_{k},y_{k}]$$$, or $$$[x_k,y_k]\\subseteq[x_{j},y_{j}]$$$, or $$$[x_j,y_j]\\cap[x_{k},y_{k}]=\\varnothing$$$; for any $$$1 \\le i \\le n$$$, such that $$$l \\le a_i \\leq r$$$, it is true that $$$$$${\\large a_i = \\sum\\limits_{\\substack {1 \\le j \\le m \\\\ x_j \\le i \\le y_j}} z_j. }$$$$$$",
  "inputFormat": "The first line contains two integers $$$n$$$ and $$$q$$$ ($$$1\\le n,q\\le 10^6$$$). The second line contains $$$n$$$ integers integers $$$a_1, a_2, \\ldots, a_n$$$ ($$$1 \\le a_i \\le n$$$). Each of the next $$$q$$$ lines contains two integers $$$l$$$ and $$$r$$$ ($$$1\\le l\\le r\\le n$$$), representing a query.",
  "outputFormat": "For each query, output the answer for this query on a separate line.",
  "sampleTests": [
    {
      "input": "10 8\n1 6 2 3 2 6 3 10 1 2\n1 10\n2 2\n3 3\n2 3\n1 3\n3 6\n4 6\n5 5",
      "output": "8\n1\n1\n3\n5\n3\n1\n0"
    }
  ],
  "timeLimit": 4000,
  "memoryLimit": 1024,
  "sourceUrl": "https://codeforces.com/problemset/problem/1864/F",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}