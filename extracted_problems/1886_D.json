{
  "contestId": 1886,
  "index": "D",
  "name": "Monocarp and the Set",
  "rating": 2100,
  "tags": [
    "implementation"
  ],
  "statement": "Monocarp has $$$n$$$ numbers $$$1, 2, \\dots, n$$$ and a set (initially empty). He adds his numbers to this set $$$n$$$ times in some order. During each step, he adds a new number (which has not been present in the set before). In other words, the sequence of added numbers is a permutation of length $$$n$$$. Every time Monocarp adds an element into the set except for the first time , he writes out a character: if the element Monocarp is trying to insert becomes the maximum element in the set, Monocarp writes out the character > ; if the element Monocarp is trying to insert becomes the minimum element in the set, Monocarp writes out the character < ; if none of the above, Monocarp writes out the character ? . You are given a string $$$s$$$ of $$$n-1$$$ characters, which represents the characters written out by Monocarp (in the order he wrote them out). You have to process $$$m$$$ queries to the string. Each query has the following format: $$$i$$$ $$$c$$$ — replace $$$s_i$$$ with the character $$$c$$$. Both before processing the queries and after each query, you have to calculate the number of different ways to order the integers $$$1, 2, 3, \\dots, n$$$ such that, if Monocarp inserts the integers into the set in that order, he gets the string $$$s$$$. Since the answers might be large, print them modulo $$$998244353$$$.",
  "inputFormat": "The first line contains two integers $$$n$$$ and $$$m$$$ ($$$2 \\le n \\le 3 \\cdot 10^5$$$; $$$1 \\le m \\le 3 \\cdot 10^5$$$). The second line contains the string $$$s$$$, consisting of exactly $$$n-1$$$ characters < , > and/or ? . Then $$$m$$$ lines follow. Each of them represents a query. Each line contains an integer $$$i$$$ and a character $$$c$$$ ($$$1 \\le i \\le n-1$$$; $$$c$$$ is either < , > , or ? ).",
  "outputFormat": "Both before processing the queries and after each query, print one integer — the number of ways to order the integers $$$1, 2, 3, \\dots, n$$$ such that, if Monocarp inserts the integers into the set in that order, he gets the string $$$s$$$. Since the answers might be large, print them modulo $$$998244353$$$.",
  "sampleTests": [
    {
      "input": "6 4\n<?>?>\n1 ?\n4 <\n5 <\n1 >",
      "output": "3\n0\n0\n0\n1"
    }
  ],
  "timeLimit": 2000,
  "memoryLimit": 256,
  "sourceUrl": "https://codeforces.com/problemset/problem/1886/D",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}