{
  "contestId": 1824,
  "index": "D",
  "name": "LuoTianyi and the Function",
  "rating": 3000,
  "tags": [
    "implementation"
  ],
  "statement": "LuoTianyi gives you an array $$$a$$$ of $$$n$$$ integers and the index begins from $$$1$$$. Define $$$g(i,j)$$$ as follows: $$$g(i,j)$$$ is the largest integer $$$x$$$ that satisfies $$$\\{a_p:i\\le p\\le j\\}\\subseteq\\{a_q:x\\le q\\le j\\}$$$ while $$$i \\le j$$$; and $$$g(i,j)=0$$$ while $$$i>j$$$. There are $$$q$$$ queries. For each query you are given four integers $$$l,r,x,y$$$, you need to calculate $$$\\sum\\limits_{i=l}^{r}\\sum\\limits_{j=x}^{y}g(i,j)$$$.",
  "inputFormat": "The first line contains two integers $$$n$$$ and $$$q$$$ ($$$1\\le n,q\\le 10^6$$$) — the length of the array $$$a$$$ and the number of queries. The second line contains $$$n$$$ integers $$$a_1,a_2,\\ldots,a_n$$$ ($$$1\\le a_i\\le n$$$) — the elements of the array $$$a$$$. Next $$$q$$$ lines describe a query. The $$$i$$$-th line contains four integers $$$l,r,x,y$$$ ($$$1\\le l\\le r\\le n, 1\\le x\\le y\\le n$$$) — the integers in the $$$i$$$-th query.",
  "outputFormat": "Print $$$q$$$ lines where $$$i$$$-th line contains one integer — the answer for the $$$i$$$-th query.",
  "sampleTests": [
    {
      "input": "6 4\n1 2 2 1 3 4\n1 1 4 5\n2 3 3 3\n3 6 1 2\n6 6 6 6",
      "output": "6\n6\n0\n6"
    }
  ],
  "timeLimit": 7000,
  "memoryLimit": 1024,
  "sourceUrl": "https://codeforces.com/problemset/problem/1824/D",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}