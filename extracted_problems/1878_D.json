{
  "contestId": 1878,
  "index": "D",
  "name": "Reverse Madness",
  "rating": 1600,
  "tags": [
    "implementation"
  ],
  "statement": "You are given a string $$$s$$$ of length $$$n$$$, containing lowercase Latin letters. Next you will be given a positive integer $$$k$$$ and two arrays, $$$l$$$ and $$$r$$$ of length $$$k$$$. It is guaranteed that the following conditions hold for these 2 arrays: $$$l_1 = 1$$$; $$$r_k = n$$$; $$$l_i \\le r_i$$$, for each positive integer $$$i$$$ such that $$$1 \\le i \\le k$$$; $$$l_i = r_{i-1}+1$$$, for each positive integer $$$i$$$ such that $$$2 \\le i \\le k$$$; Now you will be given a positive integer $$$q$$$ which represents the number of modifications you need to do on $$$s$$$. Each modification is defined with one positive integer $$$x$$$: Find an index $$$i$$$ such that $$$l_i \\le x \\le r_i$$$ (notice that such $$$i$$$ is unique). Let $$$a=\\min(x, r_i+l_i-x)$$$ and let $$$b=\\max(x, r_i+l_i-x)$$$. Reverse the substring of $$$s$$$ from index $$$a$$$ to index $$$b$$$. Reversing the substring $$$[a, b]$$$ of a string $$$s$$$ means to make $$$s$$$ equal to $$$s_1, s_2, \\dots, s_{a-1},\\ s_b, s_{b-1}, \\dots, s_{a+1}, s_a,\\ s_{b+1}, s_{b+2}, \\dots, s_{n-1}, s_n$$$. Print $$$s$$$ after the last modification is finished.",
  "inputFormat": "Each test contains multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\le t \\le 10^4$$$) — the number of test cases. Description of the test cases follows. The first line of each test case contains two integers $$$n$$$ and $$$k$$$ ($$$1 \\le k \\le n \\le 2\\cdot 10^5$$$) — the length of the string $$$s$$$, and the length of arrays $$$l$$$ and $$$r$$$. The second line of each test case contains the string $$$s$$$ ($$$ |s| = n$$$) containing lowercase Latin letters — the initial string. The third line of each test case contains $$$k$$$ positive integers $$$l_1, l_2, \\dots, l_k$$$ ($$$1 \\le l_i \\le n$$$) — the array $$$l$$$. The fourth line of each test case contains $$$k$$$ positive integers $$$r_1, r_2, \\dots, r_k$$$ ($$$1 \\le r_i \\le n$$$) — the array $$$r$$$. The fifth line of each test case contains a positive integer $$$q$$$ ($$$1 \\le q \\le 2 \\cdot 10^5 $$$) — the number of modifications you need to do to $$$s$$$. The sixth line of each test case contains $$$q$$$ positive integers $$$x_1, x_2, \\dots, x_q$$$ ($$$1\\le x_i \\le n$$$) — the description of the modifications. It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$2\\cdot10^5$$$. It is guaranteed that the sum of $$$q$$$ over all test cases does not exceed $$$2\\cdot10^5$$$. It is guaranteed that the conditions in the statement hold for the arrays $$$l$$$ and $$$r$$$.",
  "outputFormat": "For each test case, in a new line, output the string $$$s$$$ after the last modification is done.",
  "sampleTests": [
    {
      "input": "5\n4 2\nabcd\n1 3\n2 4\n2\n1 3\n5 3\nabcde\n1 2 3\n1 2 5\n3\n1 2 3\n3 1\ngaf\n1\n3\n2\n2 2\n10 1\naghcdegdij\n1\n10\n5\n1 2 3 4 2\n1 1\na\n1\n1\n1\n1",
      "output": "badc\nabedc\ngaf\njihgedcdga\na"
    }
  ],
  "timeLimit": 1000,
  "memoryLimit": 256,
  "sourceUrl": "https://codeforces.com/problemset/problem/1878/D",
  "verified": true,
  "qualityScore": 4.0,
  "source": "codeforces-scraped"
}